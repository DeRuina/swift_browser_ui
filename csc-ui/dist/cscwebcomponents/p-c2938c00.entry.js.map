{"version":3,"names":["cDataTableCss","CDataTable","this","_debounce","_extraHeaders","_isValidated","_isVisible","_sortedData","itemsPerPageOptions","hideDetails","simple","hideRange","size","onHiddenHeaderChange","_getData","onDataChange","_handleInitialHeaders","onHeaderChange","onSingleSelectionChange","clearSelections","onLoadingChange","loading","_setIndeterminateStatus","async","_selections","_emitChange","componentWillLoad","sortBy","_a","headers","key","sortDirection","_b","componentDidLoad","horizontalScrolling","_rootIntersectionObserver","IntersectionObserver","entry","isIntersecting","_handleResponsiveHeaders","_resizeObserver","ResizeObserver","_handleResize","observe","element","firstCell","_headerKeys","lastCell","length","_firstCellIntersectionObserver","firstCellHidden","threshold","rootMargin","root","_lastCellIntersectionObserver","lastCellHidden","_handleScrollWidth","_tableElement","querySelector","disconnectedCallback","disconnect","_c","_d","initiallyHiddenHeaders","filter","header","hidden","map","hiddenHeaders","Set","_handleHeaderVisibility","rootWidth","x","index","_headers","findIndex","h","dataset","id","position","getBoundingClientRect","isFullyVisible","right","isLastVisibleHeader","Array","from","_headerRefs","keys","at","isPinned","pinned","nextUnpinnedHeader","values","reverse","find","hdr","width","tableWidth","clearTimeout","breakpoints","setTimeout","footerWidth","_footerElement","markedFooterWidth","_isPaginationSimple","pop","displayHeader","includes","headerIndex","indexOf","splice","_addHeaderRef","el","Map","set","Object","data","extraCells","reduce","cells","assign","value","items","row","cell","item","_hiddenData","forEach","cellData","push","_data","_sortData","pagination","itemCount","_validateProps","requestAnimationFrame","_getSelectionValue","selectionProperty","_hasHiddenData","selection","emit","_isIndeterminate","_isPageIndeterminate","_refresh","externalData","sorted","sort","a","b","valueA","valueB","toLowerCase","localeCompare","_rowData","__rest","hiddenData","plainTextValue","formattedValue","trim","rowData","entries","toString","hideFooter","slice","startFrom","endTo","parentWidth","_getIndex","realIndex","_getSelectionsForPage","_hasSelectionsOnPage","selectionsInPage","_onHeadingSelection","event","stopPropagation","preventDefault","KeyboardEvent","type","_onPaginationChange","paginate","detail","_onSelection","singleSelection","_onSort","direction","_onToggleAdditionalData","target","tagName","isActive","singleExpansion","_activeRows","hiddenRow","expand","active","i","_handleKeyUp","forceRender","_renderAdditioanlDataRow","rowIndex","class","colSpan","_renderHiddenCells","_renderHiddenHeaderChildren","_renderCellData","options","colIndex","component","Tag","tag","injectValue","params","onClick","call","_renderCellChildren","children","child","rest","flatData","obj","_renderExpansionIndicator","tabindex","onKeyUp","height","viewBox","d","mdiChevronDown","_renderLoaderRow","_renderRows","selectionValue","isSelected","Fragment","parent","selected","_renderSelectionCell","_renderTableCells","selectable","onChangeValue","_renderSortIndicator","iconPath","mdiSwapVertical","mdiArrowUpThin","mdiArrowDownThin","_renderStatusTextRow","loadingText","noDataText","_renderTableBody","_renderTableCell","isHidden","align","justify","_sortCellProperties","_renderTableFooter","footerStyles","maxWidth","left","ref","style","footerOptions","e","_renderTableHeader","indicatorRowStyles","sticky","stickyHeader","indeterminate","isSortable","sortable","minWidth","outlined","_scrollLeft","path","mdiChevronLeft","_scrollRight","mdiChevronRight","leftBorder","hiddenHeaderKeys","headerCellLeftBorder","scrollIntoView","behavior","block","inline","rightBorder","headerCellRightBorder","keyA","keyB","console","warn","render","tableClasses","Host"],"sources":["src/components/c-data-table/c-data-table.scss?tag=c-data-table&encapsulation=shadow","src/components/c-data-table/c-data-table.tsx"],"sourcesContent":[":host {\n  display: block;\n  position: relative;\n  width: 100%;\n}\n\n:host([horizontal-scrolling]) {\n  overflow-x: scroll;\n}\n\ntable,\ncaption,\ntbody,\ntfoot,\nthead,\ntr,\nth,\ntd {\n  border: 0;\n  font-size: 100%;\n  font: inherit;\n  margin: 0;\n  padding: 0;\n}\n\ntable {\n  border-collapse: collapse;\n  border-spacing: 0;\n}\n\n.c-data-table {\n  box-shadow: inset 0 0 0 1px var(--csc-light-grey);\n  width: 100%;\n\n  .children {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 4px;\n    width: 100%;\n\n    pre {\n      font-family: inherit;\n      white-space: pre-wrap;\n    }\n  }\n\n  [data-justify='end'],\n  [data-align='end'] .children {\n    align-items: flex-end;\n  }\n\n  [data-justify='start'],\n  [data-align='start'] .children {\n    align-items: flex-start;\n  }\n\n  [data-justify='center'],\n  [data-align='center'] .children {\n    align-items: center;\n  }\n\n  [data-align='end'],\n  [data-justify='end'] .children {\n    justify-content: flex-end;\n  }\n\n  [data-align='start'],\n  [data-justify='start'] .children {\n    justify-content: flex-start;\n  }\n\n  [data-align='center'],\n  [data-justify='center'] .children {\n    justify-content: center;\n  }\n\n  th,\n  td {\n    font-weight: 400;\n\n    > div {\n      align-items: center;\n      box-sizing: border-box;\n      display: flex;\n      line-height: normal;\n      padding: 12px;\n      width: 100%;\n    }\n  }\n\n  th {\n    font-size: 14px;\n    padding: 4px;\n\n    &.selection {\n      width: 56px;\n    }\n\n    &.indicator {\n      width: 46px;\n    }\n\n    > div {\n      border-radius: 4px;\n      flex-wrap: nowrap;\n      gap: 8px;\n      height: 48px;\n      white-space: nowrap;\n\n      &.sortable:hover {\n        background-color: var(--csc-primary-text-hover);\n        color: var(--csc-primary);\n        cursor: pointer;\n\n        svg {\n          fill: var(--csc-primary);\n        }\n      }\n\n      &.selection {\n        &--heading {\n          padding-left: 8px;\n          padding-right: 0;\n          margin-right: -8px;\n        }\n      }\n    }\n  }\n\n  td {\n    font-size: 16px;\n\n    > div {\n      align-items: flex-start;\n      flex-direction: column;\n      gap: 8px;\n      justify-content: center;\n      min-height: 56px;\n      padding: 12px;\n\n      &.selection {\n        margin-right: -4px;\n        padding: 7px 0 7px 12px;\n      }\n\n      c-tag {\n        --c-tag-margin: 0px;\n      }\n    }\n\n    &.loader {\n      background-color: var(--csc-light-grey);\n      height: 2px;\n      position: relative;\n\n      > div {\n        height: 2px;\n        min-height: auto;\n        padding: 0;\n      }\n    }\n\n    &.info {\n      > div {\n        height: 108px;\n        justify-content: center;\n      }\n    }\n\n    svg {\n      transition: transform 0.3s cubic-bezier(0.25, 0.8, 0.5, 1);\n    }\n  }\n\n  thead {\n    background-color: #fff;\n    position: relative;\n\n    &.sticky {\n      box-shadow: 0 2px 0 0 var(--csc-light-grey);\n      position: sticky;\n      top: 0;\n      z-index: 3;\n    }\n\n    .c-data-table__header-indicators {\n      pointer-events: none;\n\n      th {\n        > div {\n          margin-top: -56px;\n          display: flex;\n          justify-items: space-between;\n        }\n      }\n\n      c-icon-button {\n        background-color: rgba(255, 255, 255, 0.75);\n        border-radius: 50%;\n        pointer-events: all;\n      }\n    }\n  }\n\n  tfoot {\n    background-color: #fff;\n\n    tr {\n      box-shadow: inset 0 1px 0 0 var(--csc-light-grey);\n    }\n\n    td {\n      > div {\n        align-items: center;\n        flex-direction: row;\n        justify-content: flex-start;\n        min-height: 48px;\n      }\n\n      c-pagination {\n        flex: 1;\n      }\n    }\n  }\n\n  tbody {\n    /* Safari box shadow replacement */\n    @supports (-webkit-hyphens: none) {\n      tr {\n        border-bottom: 1px solid var(--csc-light-grey);\n      }\n    }\n\n    tr {\n      box-shadow: inset 0 1px 0 0 var(--csc-light-grey);\n\n      &.actions {\n        box-shadow: none;\n\n        td > div {\n          background-color: rgba(0, 0, 0, 0.015);\n          height: auto;\n        }\n      }\n\n      &.active {\n        box-shadow: inset 2px 0 0 var(--csc-primary),\n          inset -2px 0 0 var(--csc-primary), inset 0 2px 0 var(--csc-primary);\n        border-radius: 6px 6px 0 0;\n\n        svg {\n          transform: rotate(180deg);\n        }\n\n        + .additional-data {\n          border-radius: 0 0 6px 6px;\n          box-shadow: inset 2px 0 0 var(--csc-primary),\n            inset -2px 0 0 var(--csc-primary), inset 0 -2px 0 var(--csc-primary);\n        }\n\n        &.selected {\n          box-shadow: inset 4px 0 0 var(--csc-primary),\n            inset -2px 0 0 var(--csc-primary), inset 0 2px 0 var(--csc-primary);\n        }\n      }\n\n      &.selected {\n        background-color: rgba($csc-primary, 0.05);\n        box-shadow: inset 4px 0 0 var(--csc-primary),\n          inset 0 1px 0 0 var(--csc-light-grey);\n\n        + .additional-data {\n          box-shadow: inset 4px 0 0 var(--csc-primary),\n            inset -2px 0 0 var(--csc-primary), inset 0 -2px 0 var(--csc-primary);\n        }\n      }\n    }\n  }\n\n  &__loader {\n    background-color: var(--csc-light-grey);\n    height: 2px;\n    overflow: hidden;\n    position: absolute;\n    width: 100%;\n  }\n\n  .loading-bar {\n    animation: loading 1s ease-in 0.5s infinite;\n    background-color: var(--csc-primary);\n    height: 100%;\n    left: -50%;\n    position: absolute;\n    width: 50%;\n  }\n\n  @keyframes loading {\n    0% {\n      transform: translateX(0);\n    }\n    to {\n      transform: translateX(400%);\n    }\n  }\n\n  .additional-data {\n    display: none;\n\n    &.active {\n      display: table-row;\n    }\n\n    ul {\n      list-style: none;\n      margin: 0;\n      padding: 0;\n      width: 100%;\n\n      li {\n        padding: 12px;\n\n        &:not(:last-child) {\n          box-shadow: inset 0 -1px 0 0 var(--csc-light-grey);\n        }\n\n        span {\n          color: var(--csc-primary);\n          font-weight: 600;\n        }\n\n        .title {\n          display: flex;\n          gap: 8px;\n\n          + .children {\n            margin-top: 8px;\n          }\n        }\n      }\n    }\n  }\n\n  &--scrollable {\n    position: relative;\n  }\n\n  &--hoverable {\n    tbody {\n      tr:not(.additional-data) {\n        cursor: pointer;\n\n        &:hover {\n          background-color: var(--csc-primary-text-hover);\n          border-radius: 6px;\n          box-shadow: inset 0 0 0 2px var(--csc-primary);\n          overflow: hidden;\n        }\n\n        &.active:hover {\n          border-radius: 6px 6px 0 0;\n          box-shadow: inset 2px 0 0 var(--csc-primary),\n            inset -2px 0 0 var(--csc-primary), inset 0 2px 0 var(--csc-primary);\n        }\n\n        &.selected.active:hover {\n          border-radius: 6px 6px 0 0;\n          box-shadow: inset 4px 0 0 var(--csc-primary),\n            inset -2px 0 0 var(--csc-primary), inset 0 2px 0 var(--csc-primary);\n        }\n\n        &.selected:hover {\n          border-radius: 6px;\n          box-shadow: inset 4px 0 0 var(--csc-primary),\n            inset 0 0 0 2px var(--csc-primary);\n        }\n      }\n    }\n  }\n}\n\n.sorted-column {\n  background-color: rgb(0 103 120 / 5%);\n}\n","import {\n  mdiArrowDownThin,\n  mdiArrowUpThin,\n  mdiSwapVertical,\n  mdiChevronDown,\n  mdiChevronLeft,\n  mdiChevronRight,\n} from '@mdi/js';\nimport {\n  Component,\n  Host,\n  h,\n  Element,\n  Event,\n  EventEmitter,\n  Prop,\n  State,\n  Fragment,\n  Watch,\n  Method,\n} from '@stencil/core';\nimport {\n  CDataTableData,\n  CDataTableDataItem,\n  CDataTableFooterOptions,\n  CDataTableHeader,\n  CPaginationOptions,\n} from '../../types';\n\ninterface CDataTableDataItemPrivate extends Omit<CDataTableDataItem, 'value'> {\n  _hiddenData?: {\n    id?: string;\n    key?: string;\n    value?: CDataTableDataItem;\n  }[];\n}\n\ntype HeaderRefs = Map<string, HTMLElement>;\n\n/**\n * @group Tables\n */\n@Component({\n  tag: 'c-data-table',\n  styleUrl: 'c-data-table.scss',\n  shadow: true,\n})\nexport class CDataTable {\n  @Element() element: HTMLCDataTableElement;\n\n  /**\n   * Data of the table\n   */\n  @Prop() data: CDataTableData[] = [];\n\n  /**\n   * Externally sorted and paginated data\n   */\n  @Prop() externalData = false;\n\n  /**\n   * Headers of the table\n   */\n  @Prop() headers: CDataTableHeader[] = [];\n\n  /**\n   * Hide the footer\n   */\n  @Prop() hideFooter = false;\n\n  /**\n   * Items per page options\n   */\n  @Prop() footerOptions: CDataTableFooterOptions = {\n    itemsPerPageOptions: [5, 25, 50, 100],\n    hideDetails: false,\n    simple: false,\n    hideRange: false,\n    size: 'default',\n  };\n\n  /**\n   * Show a loader on top of the table\n   */\n  @Prop() loading = false;\n\n  /**\n   * Text shown when there is no data and the table is loading\n   */\n  @Prop() loadingText = 'Loading data';\n\n  /**\n   * Text shown when there are no data available\n   */\n  @Prop() noDataText = 'No data';\n\n  /**\n   * Pagination options\n   */\n  @Prop({ mutable: true }) pagination: CPaginationOptions;\n\n  /**\n   * Make rows selectable\n   */\n  @Prop() selectable = false;\n\n  /**\n   * Select only a single row at a time\n   */\n  @Prop() singleSelection = false;\n\n  /**\n   * Property used in selections\n   */\n  @Prop() selectionProperty: string = null;\n\n  /**\n   * Allow only a single row expanded at a time\n   */\n  @Prop() singleExpansion = false;\n\n  /**\n   * Sort data by\n   */\n  @Prop({ mutable: true }) sortBy = null;\n\n  /**\n   * Sorting direction\n   */\n  @Prop({ mutable: true }) sortDirection: 'asc' | 'desc' | null = null;\n\n  /**\n   * Use sticky header\n   */\n  @Prop() stickyHeader = false;\n\n  /**\n   * Use horizontal scrolling\n   */\n  @Prop() horizontalScrolling = false;\n\n  /**\n   * Triggered on pagination\n   */\n  @Event() paginate: EventEmitter<CPaginationOptions>;\n\n  /**\n   * Triggered on row expansion\n   */\n  @Event() expand: EventEmitter;\n\n  /**\n   * Triggered on sort\n   */\n  @Event() sort: EventEmitter;\n\n  /**\n   * Triggered on selection\n   */\n  @Event() selection: EventEmitter;\n\n  @State() _activeRows: (number | string)[] = [];\n\n  @State() _data: CDataTableDataItemPrivate[] = [];\n\n  @State() _isIndeterminate = false;\n\n  @State() _isPaginationSimple = false;\n\n  @State() _selections: (string | number)[] = [];\n\n  @State() hasOverflow = false;\n\n  @State() hiddenHeaders: string[] = [];\n\n  @State() initiallyHiddenHeaders: string[] = [];\n\n  @State() forceRender = false;\n\n  @State() breakpoints: number[] = [];\n\n  @State() markedFooterWidth = 0;\n\n  @State() parentWidth = 0;\n\n  @State() firstCellHidden = false;\n\n  @State() lastCellHidden = false;\n\n  private _debounce = null;\n\n  private _extraHeaders: CDataTableHeader[] = [];\n\n  private _rootIntersectionObserver: IntersectionObserver;\n\n  private _firstCellIntersectionObserver: IntersectionObserver;\n\n  private _lastCellIntersectionObserver: IntersectionObserver;\n\n  private _resizeObserver: ResizeObserver;\n\n  private _tableElement: HTMLTableElement;\n\n  private _footerElement: HTMLTableRowElement;\n\n  private _headerRefs: HeaderRefs;\n\n  private _isValidated = false;\n\n  private _isVisible = false;\n\n  private _sortedData: Record<string, string | number | boolean>[] = [];\n\n  @Watch('hiddenHeaders')\n  onHiddenHeaderChange() {\n    this._getData();\n  }\n\n  @Watch('data')\n  onDataChange() {\n    this._getData();\n    this._handleInitialHeaders();\n  }\n\n  @Watch('headers')\n  onHeaderChange() {\n    this._handleInitialHeaders();\n  }\n\n  @Watch('singleSelection')\n  onSingleSelectionChange() {\n    this.clearSelections();\n  }\n\n  @Watch('loading')\n  onLoadingChange(loading: boolean) {\n    if (!loading) {\n      this._setIndeterminateStatus();\n    }\n  }\n\n  /**\n   * Clear selections externally\n   */\n  @Method()\n  async clearSelections() {\n    this._selections = [];\n    this._emitChange();\n  }\n\n  /**\n   * Provide sorted data\n   */\n  @Method()\n  async getData() {\n    return this._sortedData;\n  }\n\n  componentWillLoad() {\n    this.sortBy = this.sortBy ?? this.headers[0].key;\n    this.sortDirection = this.sortDirection ?? 'asc';\n    this._getData();\n\n    this._handleInitialHeaders();\n  }\n\n  componentDidLoad() {\n    if (!this.horizontalScrolling) {\n      this._rootIntersectionObserver = new IntersectionObserver(([entry]) => {\n        if (entry.isIntersecting) {\n          this._handleResponsiveHeaders();\n\n          this._isVisible = true;\n        }\n      });\n\n      this._resizeObserver = new ResizeObserver(() => {\n        this._handleResize();\n      });\n\n      this._rootIntersectionObserver.observe(this.element);\n    } else {\n      const [firstCell] = this._headerKeys;\n      const lastCell = this._headerKeys[this._headerKeys.length - 1];\n\n      this._firstCellIntersectionObserver = new IntersectionObserver(\n        ([entry]) => {\n          this.firstCellHidden = !entry.isIntersecting;\n        },\n        { threshold: 1, rootMargin: '16px', root: this.element },\n      );\n\n      this._lastCellIntersectionObserver = new IntersectionObserver(\n        ([entry]) => {\n          this.lastCellHidden = !entry.isIntersecting;\n        },\n        { threshold: 1, rootMargin: '16px', root: this.element },\n      );\n\n      this._resizeObserver = new ResizeObserver(() => {\n        this._handleScrollWidth();\n      });\n\n      this._firstCellIntersectionObserver.observe(\n        this._tableElement.querySelector(`[data-id=\"${firstCell}\"]`),\n      );\n\n      this._lastCellIntersectionObserver.observe(\n        this._tableElement.querySelector(`[data-id=\"${lastCell}\"]`),\n      );\n    }\n\n    this._resizeObserver.observe(this.element);\n  }\n\n  disconnectedCallback() {\n    this._resizeObserver?.disconnect();\n    this._rootIntersectionObserver?.disconnect();\n    this._firstCellIntersectionObserver?.disconnect();\n    this._lastCellIntersectionObserver?.disconnect();\n  }\n\n  private _handleInitialHeaders() {\n    this.initiallyHiddenHeaders = this.headers\n      .filter((header) => !!header.hidden)\n      .map((header) => header.key);\n\n    // Hide the initially hidden headers\n    this.hiddenHeaders = [\n      ...new Set([...this.hiddenHeaders, ...this.initiallyHiddenHeaders]),\n    ];\n  }\n\n  private _handleHeaderVisibility(\n    header: HTMLElement,\n    rootWidth: number,\n    x: number,\n  ) {\n    const index = this._headers.findIndex((h) => h.key === header.dataset.id);\n    const position = header.getBoundingClientRect();\n    const isFullyVisible = position.right - x <= rootWidth;\n    const isLastVisibleHeader =\n      header.dataset.id === Array.from(this._headerRefs.keys()).at(0);\n    const isPinned = this._headers[index]?.pinned;\n\n    if (!isFullyVisible && isPinned && index >= 1) {\n      const nextUnpinnedHeader = Array.from(this._headerRefs.values())\n        .reverse()\n        .find((hdr) => {\n          if (!hdr) return false;\n\n          return !this._headers.find((h) => h.key === hdr.dataset.id)?.pinned;\n        });\n\n      this.hiddenHeaders = [\n        ...new Set([\n          ...this.initiallyHiddenHeaders,\n          ...this.hiddenHeaders,\n          (nextUnpinnedHeader || header).dataset.id, // hide the pinned header as a last resort\n        ]),\n      ];\n\n      return;\n    }\n\n    if (!isFullyVisible && !isLastVisibleHeader) {\n      this.hiddenHeaders = [\n        ...new Set([\n          ...this.initiallyHiddenHeaders,\n          ...this.hiddenHeaders,\n          header.dataset.id,\n        ]),\n      ];\n    }\n  }\n\n  private _handleResponsiveHeaders() {\n    const { width: tableWidth } = this._tableElement.getBoundingClientRect();\n    const { width: rootWidth, x } = this.element.getBoundingClientRect();\n\n    if (this._debounce !== null) {\n      clearTimeout(this._debounce);\n      this._debounce = null;\n    }\n\n    if (rootWidth < tableWidth) {\n      this.breakpoints = [...new Set([...this.breakpoints, tableWidth])];\n\n      setTimeout(() => {\n        for (const header of this._headerRefs.values()) {\n          if (header) {\n            this._handleHeaderVisibility(header, rootWidth, x);\n          }\n        }\n\n        this._debounce = setTimeout(() => {\n          const footerWidth =\n            this._footerElement?.getBoundingClientRect()?.width || 0;\n\n          if (rootWidth < footerWidth) {\n            this.markedFooterWidth = footerWidth;\n            this._isPaginationSimple = true;\n          }\n        }, 200);\n      }, 0);\n    } else if (\n      this.breakpoints.length > 0 &&\n      tableWidth >= this.breakpoints[this.breakpoints.length - 1]\n    ) {\n      this.breakpoints.pop();\n      // Header that can be unhided from current hiddenHeaders\n      const displayHeader = this.headers.find((header) =>\n        this.hiddenHeaders.includes(header.key),\n      );\n\n      if (!!displayHeader) {\n        const headerIndex = this.hiddenHeaders.indexOf(displayHeader.key);\n        this.hiddenHeaders.splice(headerIndex, 1);\n        this.hiddenHeaders = [\n          ...new Set([...this.hiddenHeaders, ...this.initiallyHiddenHeaders]),\n        ];\n      }\n    }\n\n    this._debounce = setTimeout(() => {\n      if (rootWidth >= this.markedFooterWidth && this.markedFooterWidth > 0) {\n        this._isPaginationSimple = false;\n      }\n    }, 200);\n  }\n\n  private _addHeaderRef(key: string, el: HTMLElement) {\n    if (!this._headerRefs) {\n      this._headerRefs = new Map([[key, el]]);\n\n      return;\n    }\n\n    this._headerRefs.set(key, el);\n  }\n\n  private _getData() {\n    this._extraHeaders = this.headers.filter(\n      (header) => !Object.keys(this.data?.[0] || {}).includes(header.key),\n    );\n\n    // create cells for headers not present in the data\n    const extraCells = this._extraHeaders.reduce(\n      (cells, header) => ({\n        ...cells,\n        [header.key]: {\n          value: null,\n        },\n      }),\n      {},\n    );\n\n    const items = this.data\n      .map((row) => ({\n        ...row,\n        ...extraCells,\n      }))\n      .reduce<CDataTableDataItemPrivate[]>((data, cell) => {\n        const item: CDataTableDataItemPrivate = {\n          _hiddenData: [],\n        };\n\n        Object.keys(cell).forEach((key) => {\n          item[key] = cell[key];\n        });\n\n        this.hiddenHeaders.forEach((header) => {\n          const cellData = this.headers.find((h) => h.key === header);\n\n          item._hiddenData.push({\n            id: cellData?.key,\n            key: cellData?.value,\n            value: cell[header],\n          });\n        });\n\n        data.push(item);\n\n        return data;\n      }, []);\n\n    this._data = this._sortData(items);\n\n    this.pagination = { ...this.pagination, itemCount: this.data.length };\n\n    this._validateProps(this._data[0]);\n\n    this._handleScrollWidth();\n\n    requestAnimationFrame(() => {\n      this._handleResize();\n    });\n  }\n\n  private _getSelectionValue(\n    row: CDataTableDataItemPrivate,\n    index: number,\n  ): string | number {\n    return !!this.selectionProperty\n      ? row[this.selectionProperty]?.value || index\n      : index;\n  }\n\n  private get _headers() {\n    return this.headers\n      .map((header) => ({\n        ...header,\n        pinned: !!header.pinned,\n      }))\n      .filter(\n        (header) => !this.hiddenHeaders.includes(header.key) && !header.hidden,\n      );\n  }\n\n  private get _headerKeys() {\n    return this._headers.map((header) => header.key);\n  }\n\n  private get _hasHiddenData() {\n    return !!this.hiddenHeaders.length;\n  }\n\n  private _emitChange() {\n    this.selection.emit(this._selections);\n  }\n\n  private _setIndeterminateStatus() {\n    requestAnimationFrame(() => {\n      this._isIndeterminate = this._isPageIndeterminate();\n      this._refresh();\n    });\n  }\n\n  private _sortData(\n    data: CDataTableDataItem[] | CDataTableDataItemPrivate[],\n  ): CDataTableDataItemPrivate[] {\n    if (!this.sortBy || this.externalData) return data;\n\n    const sorted = data.sort((a, b) => {\n      const valueA = a[this.sortBy].value;\n      const valueB = b[this.sortBy].value;\n\n      if (typeof valueA === 'string') {\n        if (this.sortDirection === 'asc') {\n          return valueA.toLowerCase().localeCompare(valueB.toLowerCase());\n        }\n\n        return valueB.toLowerCase().localeCompare(valueA.toLowerCase());\n      }\n\n      if (typeof valueA === 'number') {\n        if (this.sortDirection === 'asc') {\n          return valueA - valueB;\n        }\n\n        return valueB - valueA;\n      }\n    });\n\n    this._sortedData = sorted.map((row) => {\n      const { _hiddenData, ..._rowData } = row;\n\n      const hiddenData = _hiddenData.reduce((items, item) => {\n        items[item.id] =\n          item.value.plainTextValue ||\n          item.value.formattedValue?.trim() ||\n          item.value.value;\n\n        return items;\n      }, {});\n\n      const rowData = Object.entries(_rowData).reduce(\n        (items, [key, item]: [string, CDataTableDataItem]) => {\n          items[key] =\n            item.plainTextValue ||\n            item.formattedValue?.toString().trim() ||\n            item.value;\n\n          return items;\n        },\n        {},\n      );\n\n      return {\n        ...rowData,\n        ...hiddenData,\n      };\n    });\n\n    return !this.hideFooter\n      ? sorted.slice(\n          this.pagination?.startFrom ?? 0,\n          (this.pagination?.endTo ?? this.data.length) + 1,\n        )\n      : sorted;\n  }\n\n  private _handleScrollWidth() {\n    this.parentWidth = this.element.getBoundingClientRect().width;\n  }\n\n  private _handleResize() {\n    if (this._isVisible) {\n      this._handleResponsiveHeaders();\n    }\n  }\n\n  private _getIndex(index: number) {\n    let realIndex = index;\n\n    if (\n      !this.selectionProperty &&\n      !!this.pagination &&\n      typeof realIndex === 'number'\n    ) {\n      realIndex += this.pagination.startFrom;\n\n      if (this.sortDirection === 'desc') {\n        realIndex = this.pagination.itemCount - 1 - realIndex;\n      }\n    }\n\n    return realIndex;\n  }\n\n  private _getSelectionsForPage() {\n    return this._selections.filter((selection) =>\n      this._data\n        .map((row, index) =>\n          this._getSelectionValue(row, this._getIndex(index)),\n        )\n        .includes(selection),\n    );\n  }\n\n  private _hasSelectionsOnPage() {\n    return this._getSelectionsForPage().length > 0;\n  }\n\n  private _isPageIndeterminate() {\n    const selectionsInPage = this._getSelectionsForPage();\n\n    return (\n      this._hasSelectionsOnPage() && selectionsInPage.length < this._data.length\n    );\n  }\n\n  private _onHeadingSelection(event: KeyboardEvent | MouseEvent) {\n    event?.stopPropagation();\n    event?.preventDefault();\n\n    if (\n      event instanceof KeyboardEvent &&\n      event.type === 'keyup' &&\n      event.key !== ' '\n    ) {\n      return;\n    }\n\n    if (this._debounce !== null) {\n      clearTimeout(this._debounce);\n      this._debounce = null;\n    }\n\n    this._debounce = setTimeout(() => {\n      if (this._data.length === this._getSelectionsForPage().length) {\n        this._selections = [\n          ...this._selections.filter(\n            (selection) =>\n              !this._data\n                .map((row, index) =>\n                  this._getSelectionValue(row, this._getIndex(index)),\n                )\n                .includes(selection),\n          ),\n        ];\n\n        this._setIndeterminateStatus();\n        this._emitChange();\n\n        this._tableElement;\n\n        return;\n      }\n\n      this._selections = [\n        ...new Set([\n          ...this._selections,\n          ...this._data.map((row, index) =>\n            this._getSelectionValue(row, this._getIndex(index)),\n          ),\n        ]),\n      ];\n\n      this._setIndeterminateStatus();\n      this._emitChange();\n    }, 200);\n  }\n\n  private _onPaginationChange(event: CustomEvent) {\n    if (this.externalData) {\n      this.paginate.emit(event.detail);\n\n      return;\n    }\n\n    this.pagination = {\n      ...this.pagination,\n      ...event.detail,\n    };\n\n    this._setIndeterminateStatus();\n\n    this._getData();\n  }\n\n  private _onSelection(value: string | number) {\n    if (this.singleSelection) {\n      this._selections = [value];\n\n      this._emitChange();\n      this._refresh();\n\n      return;\n    }\n\n    if (this._selections.includes(value)) {\n      this._selections = this._selections.filter(\n        (selection) => selection !== value,\n      );\n    } else {\n      this._selections = [...this._selections, value];\n    }\n\n    this._emitChange();\n\n    this._setIndeterminateStatus();\n  }\n\n  private _onSort(key: string) {\n    if (this.sortBy === key) {\n      this.sortDirection = this.sortDirection === 'asc' ? 'desc' : 'asc';\n    } else {\n      this.sortDirection = 'asc';\n    }\n\n    this.sortBy = key;\n\n    this.sort.emit({ sortBy: this.sortBy, direction: this.sortDirection });\n\n    this._getData();\n\n    this._setIndeterminateStatus();\n    this._refresh();\n  }\n\n  private _onToggleAdditionalData(\n    event: KeyboardEvent | MouseEvent,\n    value: string | number,\n    row,\n  ) {\n    if (\n      !this._hasHiddenData ||\n      (event.target as HTMLElement).tagName === 'C-CHECKBOX'\n    )\n      return;\n\n    const isActive = this.singleExpansion\n      ? this._activeRows[0] === value\n      : this._activeRows.includes(value);\n\n    const { _hiddenData, ...data } = row;\n\n    Object.keys(data).forEach((key) => {\n      data[key] = data[key].value;\n    });\n\n    _hiddenData.forEach((hiddenRow) => {\n      data[hiddenRow.id] = hiddenRow.value.value;\n    });\n\n    this.expand.emit({\n      active: !isActive,\n      row: data,\n    });\n\n    if (this.singleExpansion) {\n      this._activeRows = isActive ? [] : [value];\n\n      return;\n    }\n\n    if (isActive) {\n      this._activeRows = this._activeRows.filter((i) => i !== value);\n\n      return;\n    }\n\n    this._activeRows = [...this._activeRows, value];\n  }\n\n  private _handleKeyUp(event: KeyboardEvent, value: string | number, row) {\n    event.preventDefault();\n\n    if (event.key === 'Enter') {\n      this._onToggleAdditionalData(event, value, row);\n    }\n  }\n\n  private _refresh() {\n    this.forceRender = !this.forceRender;\n  }\n\n  private _renderAdditioanlDataRow(rowIndex: number, rowData = {}) {\n    return (\n      this._hasHiddenData && (\n        <tr\n          class={{\n            'additional-data': true,\n            active: this._activeRows.includes(rowIndex),\n          }}\n        >\n          <td colSpan={100}>\n            <div>\n              <ul>\n                {this._renderHiddenCells(rowIndex)}\n                {this._renderHiddenHeaderChildren(rowIndex, rowData)}\n              </ul>\n            </div>\n          </td>\n        </tr>\n      )\n    );\n  }\n\n  private _renderCellData(\n    key: string,\n    options: CDataTableDataItem,\n    colIndex: number,\n    rowIndex: number,\n  ) {\n    const component = options.component || this._headers[colIndex]?.component;\n    const Tag = component?.tag || null;\n    const injectValue = !!component?.injectValue;\n    const params = component?.params || {};\n\n    if (injectValue) {\n      params.value = options.value;\n    }\n\n    return !!Tag ? (\n      <Tag\n        {...params}\n        onClick={(event: MouseEvent) => {\n          params?.onClick?.({\n            index: rowIndex,\n            value: options.value,\n            data: this.data[rowIndex],\n            event,\n            key,\n          });\n        }}\n      >\n        {options.formattedValue || options.value}\n      </Tag>\n    ) : (\n      options.formattedValue || options.value\n    );\n  }\n\n  private _renderCellChildren(\n    options: CDataTableDataItem | CDataTableHeader,\n    index: number,\n    key: string,\n    data: CDataTableDataItemPrivate,\n  ) {\n    return options.children.map((child) => {\n      const Tag = child.component?.tag;\n      const params = child.component?.params || {};\n\n      const { _hiddenData = [], ...rest } = data;\n\n      const flatData: CDataTableData = {\n        ...(rest as Partial<CDataTableData>),\n        ..._hiddenData.reduce((obj, row) => {\n          obj[row.id] = row.value;\n\n          return obj;\n        }, {} as CDataTableData),\n      };\n\n      return !!Tag ? (\n        <Tag\n          {...params}\n          onClick={(event: MouseEvent) => {\n            params?.onClick?.({\n              value: options.value,\n              index,\n              event,\n              key,\n              data: flatData,\n            });\n          }}\n        >\n          {child.value}\n        </Tag>\n      ) : (\n        child.value\n      );\n    });\n  }\n\n  private _renderExpansionIndicator(rowIndex: number, rowData = {}) {\n    return (\n      this._hasHiddenData && (\n        <td>\n          <div\n            tabindex=\"0\"\n            onKeyUp={(event: KeyboardEvent) =>\n              this._handleKeyUp(event, rowIndex, rowData)\n            }\n          >\n            <svg width=\"22\" height=\"22\" viewBox=\"0 0 24 24\">\n              <path d={mdiChevronDown} />\n            </svg>\n          </div>\n        </td>\n      )\n    );\n  }\n\n  private _renderHiddenCells(index) {\n    return this._data[index]._hiddenData\n      .filter((d) => !this._extraHeaders.find((h) => h.key === d.id))\n      .map(({ id, key, value: options }) => {\n        const index = this._headers.findIndex((h) => h.key === id);\n\n        return (\n          <li>\n            {!!key && (\n              <div class=\"title\">\n                <span>{key}:</span>\n                {this._renderCellData(id, options, index, index)}\n              </div>\n            )}\n\n            {!!options.children && (\n              <div class=\"children\">\n                {this._renderCellChildren(options, index, id, {})}\n              </div>\n            )}\n          </li>\n        );\n      });\n  }\n\n  private _renderHiddenHeaderChildren(index, rowData) {\n    return this._data[index]._hiddenData.map(({ id, key }) => {\n      const headerIndex = this.headers.findIndex((h) => h.key === id);\n\n      return (\n        !!this.headers[headerIndex]?.children && (\n          <li>\n            <div class=\"children\">\n              {this._renderCellChildren(\n                this.headers[headerIndex],\n                index,\n                key,\n                rowData,\n              )}\n            </div>\n          </li>\n        )\n      );\n    });\n  }\n\n  private _renderLoaderRow() {\n    return (\n      <tr>\n        <td class=\"loader\" colSpan={100}>\n          {this.loading && (\n            <div class=\"c-data-table__loader\">\n              <div class=\"loading-bar\" />\n            </div>\n          )}\n        </td>\n      </tr>\n    );\n  }\n\n  private _renderRows() {\n    return (\n      !!this._data.length &&\n      Object.values(this._data).map((rowData, rowIndex) => {\n        let selectionValue = this._getSelectionValue(rowData, rowIndex);\n\n        if (!this.selectionProperty && typeof selectionValue === 'number') {\n          selectionValue = this._getIndex(selectionValue);\n        }\n\n        const isSelected = !!this._selections.includes(selectionValue);\n\n        return (\n          <Fragment>\n            <tr\n              class={{\n                active: this._activeRows.includes(rowIndex),\n                parent: this._hasHiddenData,\n                selected: isSelected,\n              }}\n              onClick={(event) =>\n                this._onToggleAdditionalData(event, rowIndex, rowData)\n              }\n            >\n              {this._renderSelectionCell(isSelected, selectionValue)}\n              {this._renderExpansionIndicator(rowIndex, rowData)}\n              {this._renderTableCells(rowIndex, rowData)}\n            </tr>\n\n            {this._renderAdditioanlDataRow(rowIndex, rowData)}\n          </Fragment>\n        );\n      })\n    );\n  }\n\n  private _renderSelectionCell(\n    isSelected: boolean,\n    selectionValue: string | number,\n  ) {\n    return (\n      this.selectable && (\n        <td>\n          <div class=\"selection\">\n            <c-checkbox\n              value={isSelected}\n              hide-details\n              onChangeValue={() => this._onSelection(selectionValue)}\n            ></c-checkbox>\n          </div>\n        </td>\n      )\n    );\n  }\n\n  private _renderSortIndicator(key: string) {\n    let iconPath = mdiSwapVertical;\n\n    if (key === this.sortBy && this.sortDirection === 'asc') {\n      iconPath = mdiArrowUpThin;\n    }\n\n    if (key === this.sortBy && this.sortDirection === 'desc') {\n      iconPath = mdiArrowDownThin;\n    }\n\n    return (\n      <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" tabindex={0}>\n        <path d={iconPath} />\n      </svg>\n    );\n  }\n\n  private _renderStatusTextRow() {\n    return (\n      !this._data.length && (\n        <tr>\n          <td class=\"info\" colSpan={100}>\n            <div>{this.loading ? this.loadingText : this.noDataText}</div>\n          </td>\n        </tr>\n      )\n    );\n  }\n\n  private _renderTableBody() {\n    return (\n      <tbody>\n        {this._renderLoaderRow()}\n        {this._renderStatusTextRow()}\n        {this._renderRows()}\n      </tbody>\n    );\n  }\n\n  private _renderTableCell(\n    key: string,\n    options: CDataTableDataItem,\n    colIndex: number,\n    rowIndex: number,\n    rowData = {},\n  ) {\n    const header = this.headers.find((header) => header.key === key);\n    const isHidden = this.hiddenHeaders.includes(key);\n\n    // Render only if key is present in headers\n    return (\n      !!header &&\n      !isHidden && (\n        <td>\n          <div data-align={header?.align} data-justify={header?.justify}>\n            {this._renderCellData(key, options, colIndex, rowIndex)}\n\n            {!!options.children && (\n              <div class=\"children\">\n                {this._renderCellChildren(options, rowIndex, key, rowData)}\n              </div>\n            )}\n\n            {!!this.headers.find((header) => header.key === key)?.children && (\n              <div class=\"children\">\n                {this._renderCellChildren(\n                  this.headers.find((header) => header.key === key),\n                  rowIndex,\n                  key,\n                  rowData,\n                )}\n              </div>\n            )}\n          </div>\n        </td>\n      )\n    );\n  }\n\n  private _renderTableCells(rowIndex: number, rowData = {}) {\n    return this._sortCellProperties(rowData).map(([key, options], index) =>\n      this._renderTableCell(key, options, index, rowIndex, rowData),\n    );\n  }\n\n  private _renderTableFooter() {\n    const footerStyles = this.horizontalScrolling\n      ? {\n          maxWidth: `${this.parentWidth}px`,\n          position: 'sticky',\n          left: '0',\n        }\n      : {};\n\n    return (\n      !!this.pagination && (\n        <tfoot>\n          <tr ref={(el) => (this._footerElement = el as HTMLTableRowElement)}>\n            <td colSpan={100}>\n              <div class=\"c-data-table__footer\" style={footerStyles}>\n                <c-pagination\n                  {...this.footerOptions}\n                  value={this.pagination}\n                  simple={this._isPaginationSimple}\n                  onChangeValue={(e) => this._onPaginationChange(e)}\n                ></c-pagination>\n              </div>\n            </td>\n          </tr>\n        </tfoot>\n      )\n    );\n  }\n\n  private _renderTableHeader() {\n    const indicatorRowStyles = this.horizontalScrolling\n      ? {\n          width: `${this.parentWidth - 8}px`,\n          position: 'sticky',\n          left: '4px',\n        }\n      : {};\n\n    return (\n      <thead class={{ sticky: this.stickyHeader }}>\n        <tr>\n          {this.selectable && (\n            <th class=\"selection\">\n              {!this.singleSelection && (\n                <div class=\"selection--heading\">\n                  <c-checkbox\n                    value={this._hasSelectionsOnPage()}\n                    indeterminate={this._isIndeterminate}\n                    hide-details\n                    onClick={(event: MouseEvent) =>\n                      this._onHeadingSelection(event)\n                    }\n                    onKeyUp={(event: KeyboardEvent) =>\n                      this._onHeadingSelection(event)\n                    }\n                  ></c-checkbox>\n                </div>\n              )}\n            </th>\n          )}\n\n          {this._hasHiddenData && <th class=\"indicator\"></th>}\n\n          {!!this._headers.length &&\n            this._headers.map((header) => {\n              const isSortable =\n                !!header.sortable || typeof header.sortable === 'undefined';\n              const params = {\n                'data-id': header.key,\n                ref: (el) => this._addHeaderRef(header.key, el),\n                ...(!!header && {\n                  style: {\n                    ...(header.width && { minWidth: header.width }),\n                  },\n                }),\n                ...(isSortable && {\n                  onClick: () => this._onSort(header.key),\n                  onKeyUp: () => this._onSort(header.key),\n                }),\n              };\n\n              return (\n                <th {...params}>\n                  <div class={{ sortable: isSortable }}>\n                    {header.value}\n                    {isSortable && this._renderSortIndicator(header.key)}\n                  </div>\n                </th>\n              );\n            })}\n        </tr>\n\n        {this.horizontalScrolling && (\n          <tr class=\"c-data-table__header-indicators\">\n            <th colSpan={100}>\n              <div style={indicatorRowStyles}>\n                {this.firstCellHidden && (\n                  <c-icon-button\n                    class=\"first\"\n                    size=\"small\"\n                    outlined\n                    onClick={() => this._scrollLeft()}\n                  >\n                    <c-icon path={mdiChevronLeft}></c-icon>\n                  </c-icon-button>\n                )}\n\n                <c-spacer />\n\n                {this.lastCellHidden && (\n                  <c-icon-button\n                    class=\"last\"\n                    size=\"small\"\n                    outlined\n                    onClick={() => this._scrollRight()}\n                  >\n                    <c-icon path={mdiChevronRight}></c-icon>\n                  </c-icon-button>\n                )}\n              </div>\n            </th>\n          </tr>\n        )}\n      </thead>\n    );\n  }\n\n  private _scrollLeft() {\n    const leftBorder = this.element.getBoundingClientRect().left;\n\n    const hiddenHeaderKeys = this._headerKeys.filter((key) => {\n      const headerCellLeftBorder = this._tableElement\n        .querySelector(`[data-id=\"${key}\"]`)\n        ?.getBoundingClientRect().left;\n\n      return headerCellLeftBorder < leftBorder - 2;\n    });\n\n    if (hiddenHeaderKeys.length) {\n      if (hiddenHeaderKeys.length === 1) {\n        this._tableElement.scrollIntoView({\n          behavior: 'smooth',\n          block: 'nearest',\n          inline: 'start',\n        });\n\n        return;\n      }\n\n      this._tableElement\n        .querySelector(\n          `[data-id=\"${hiddenHeaderKeys[hiddenHeaderKeys.length - 1]}\"]`,\n        )\n        .scrollIntoView({ behavior: 'smooth', block: 'nearest' });\n    }\n  }\n\n  private _scrollRight() {\n    const rightBorder = this.element.getBoundingClientRect().right;\n\n    const hiddenHeaderKeys = this._headerKeys.filter((key) => {\n      const headerCellRightBorder = this._tableElement\n        .querySelector(`[data-id=\"${key}\"]`)\n        ?.getBoundingClientRect().right;\n\n      return headerCellRightBorder > rightBorder + 2;\n    });\n\n    if (hiddenHeaderKeys.length) {\n      this._tableElement\n        .querySelector(`[data-id=\"${hiddenHeaderKeys[0]}\"]`)\n        .scrollIntoView({ behavior: 'smooth', block: 'nearest' });\n    }\n  }\n\n  /**\n   * Order table row properties by the header keys\n   */\n  private _sortCellProperties(row: CDataTableDataItemPrivate) {\n    const sorted = Object.entries(row)\n      .filter(([key]) => ![...this.hiddenHeaders, '_hiddenData'].includes(key))\n      .sort(\n        ([keyA], [keyB]) =>\n          this._headerKeys.indexOf(keyA) - this._headerKeys.indexOf(keyB),\n      );\n\n    return sorted;\n  }\n\n  private _validateProps(data) {\n    if (\n      !!data &&\n      !this._isValidated &&\n      this.selectionProperty !== null &&\n      !data[this.selectionProperty]\n    ) {\n      console.warn(\n        `[C-DATA-TABLE] Invalid selection property '${this.selectionProperty}'. Using row index as a fallback. This may lead to unexpected behavior.`,\n      );\n\n      this._isValidated = true;\n    }\n  }\n\n  render() {\n    const tableClasses = {\n      'c-data-table': true,\n      'c-data-table--hoverable': this.selectable || this._hasHiddenData,\n      'c-data-table--scrollable': this.horizontalScrolling,\n    };\n\n    return (\n      <Host>\n        <table\n          class={tableClasses}\n          ref={(el) => (this._tableElement = el as HTMLTableElement)}\n        >\n          <colgroup>\n            {[\n              ...(this.selectable ? ['_selection'] : []),\n              ...(this.hiddenHeaders.length ? ['_hidden'] : []),\n              ...this._headerKeys,\n            ].map((key) => (\n              <col class={this.sortBy === key && 'sorted-column'}></col>\n            ))}\n          </colgroup>\n          {this._renderTableHeader()}\n          {this._renderTableBody()}\n          {!this.hideFooter && this._renderTableFooter()}\n        </table>\n      </Host>\n    );\n  }\n}\n"],"mappings":"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"}
